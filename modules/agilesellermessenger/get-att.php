<?php
///-build_id: 2019051707.2854
/// This source file is subject to the Software License Agreement that is bundled with this 
/// package in the file license.txt, or you can get it here
/// http://addons-modules.com/en/content/3-terms-and-conditions-of-use
///
/// @copyright  2009-2016 Addons-Modules.com
///  If you need open code to customize or merge code with othe modules, please contact us.

include(dirname(__FILE__).'/../../config/config.inc.php');
include(dirname(__FILE__).'/../../init.php');
include(dirname(__FILE__).'/agilesellermessenger.php');

function displayError($RDD95BBEC198B2C577F5B3E60A5984492)  {   $R64D53A42404E0084D759965821B9824E = array(    'Invalid key.' => Tools::displayError('Invalid key.'),    'This product doesn\'t exists in our store.' => Tools::displayError('This product doesn\'t exists in our store.'),    'This product has been deleted.' => Tools::displayError('This product has been deleted.'),    'This file no more exists.' => Tools::displayError('This file no more exists.'),    'The product deadline is in the past.' => Tools::displayError('The product deadline is in the past.'),    'Dear customer, you exceed the expiration date.' => Tools::displayError('Dear customer, you exceed the expiration date.'),    'You reach the maximum number of allowed downloads.' => Tools::displayError('You reach the maximum number of allowed downloads.'));  ?>  <script type="text/javascript">  <!--  alert("<?php echo html_entity_decode($R64D53A42404E0084D759965821B9824E[$RDD95BBEC198B2C577F5B3E60A5984492], ENT_QUOTES, 'utf-8'); ?>");  window.location.href = '<?php echo __PS_BASE_URI__ ?>';  -->  </script>  <?php   exit();  }      if (!isset($_GET['filename'])) return true;  $R3656889A448A7AF799D2D7955BED2354=$_GET['filename'];  $R3435986BDA8C9393E0EBDB9F58F02750 = AgileSellerMessenger::prepareAttFolder(intval($_GET['id_seller']));  $R09A33463761E506248078D422B1C5226 = $R3435986BDA8C9393E0EBDB9F58F02750 .$R3656889A448A7AF799D2D7955BED2354;  if (!file_exists($R09A33463761E506248078D422B1C5226))   Tools::redirect('index.php');      $R10FB484DCFC0F1C7E71436BBD7A890C1 = false;  if (function_exists('finfo_open'))  {   $RBAEC1637E8DCB47CB63AF62CE64DC254 = @finfo_open(FILEINFO_MIME);   $R10FB484DCFC0F1C7E71436BBD7A890C1 = @finfo_file($RBAEC1637E8DCB47CB63AF62CE64DC254, $R09A33463761E506248078D422B1C5226);   @finfo_close($RBAEC1637E8DCB47CB63AF62CE64DC254);  }  elseif (function_exists('mime_content_type'))   $R10FB484DCFC0F1C7E71436BBD7A890C1 = @mime_content_type($R09A33463761E506248078D422B1C5226);  elseif (function_exists('exec'))   $R10FB484DCFC0F1C7E71436BBD7A890C1 = trim(@exec('file -bi '.escapeshellarg($R09A33463761E506248078D422B1C5226)));    if (empty($R10FB484DCFC0F1C7E71436BBD7A890C1))  {   $R8FF3F4EA05D059F3E3E020099925ADB0 = basename($R3656889A448A7AF799D2D7955BED2354);   $R8FF3F4EA05D059F3E3E020099925ADB0 = explode('.', $R8FF3F4EA05D059F3E3E020099925ADB0);   $R8FF3F4EA05D059F3E3E020099925ADB0 = strtolower($R8FF3F4EA05D059F3E3E020099925ADB0[count($R8FF3F4EA05D059F3E3E020099925ADB0) - 1]);      $R05DD77CFE897ACD84A7ED6B7A7CC00ED = array(   'ez' => 'application/andrew-inset',   'hqx' => 'application/mac-binhex40',   'cpt' => 'application/mac-compactpro',   'doc' => 'application/msword',   'bin' => 'application/octet-stream',   'dms' => 'application/octet-stream',   'lha' => 'application/octet-stream',   'lzh' => 'application/octet-stream',   'exe' => 'application/octet-stream',   'class' => 'application/octet-stream',   'so' => 'application/octet-stream',   'dll' => 'application/octet-stream',   'oda' => 'application/oda',   'pdf' => 'application/pdf',   'ai' => 'application/postscript',   'eps' => 'application/postscript',   'ps' => 'application/postscript',   'smi' => 'application/smil',   'smil' => 'application/smil',   'wbxml' => 'application/vnd.wap.wbxml',   'wmlc' => 'application/vnd.wap.wmlc',   'wmlsc' => 'application/vnd.wap.wmlscriptc',   'bcpio' => 'application/x-bcpio',   'vcd' => 'application/x-cdlink',   'pgn' => 'application/x-chess-pgn',   'cpio' => 'application/x-cpio',   'csh' => 'application/x-csh',   'dcr' => 'application/x-director',   'dir' => 'application/x-director',   'dxr' => 'application/x-director',   'dvi' => 'application/x-dvi',   'spl' => 'application/x-futuresplash',   'gtar' => 'application/x-gtar',   'hdf' => 'application/x-hdf',   'js' => 'application/x-javascript',   'skp' => 'application/x-koan',   'skd' => 'application/x-koan',   'skt' => 'application/x-koan',   'skm' => 'application/x-koan',   'latex' => 'application/x-latex',   'nc' => 'application/x-netcdf',   'cdf' => 'application/x-netcdf',   'sh' => 'application/x-sh',   'shar' => 'application/x-shar',   'swf' => 'application/x-shockwave-flash',   'sit' => 'application/x-stuffit',   'sv4cpio' => 'application/x-sv4cpio',   'sv4crc' => 'application/x-sv4crc',   'tar' => 'application/x-tar',   'tcl' => 'application/x-tcl',   'tex' => 'application/x-tex',   'texinfo' => 'application/x-texinfo',   'texi' => 'application/x-texinfo',   't' => 'application/x-troff',   'tr' => 'application/x-troff',   'roff' => 'application/x-troff',   'man' => 'application/x-troff-man',   'me' => 'application/x-troff-me',   'ms' => 'application/x-troff-ms',   'ustar' => 'application/x-ustar',   'src' => 'application/x-wais-source',   'xhtml' => 'application/xhtml+xml',   'xht' => 'application/xhtml+xml',   'zip' => 'application/zip',   'au' => 'audio/basic',   'snd' => 'audio/basic',   'mid' => 'audio/midi',   'midi' => 'audio/midi',   'kar' => 'audio/midi',   'mpga' => 'audio/mpeg',   'mp2' => 'audio/mpeg',   'mp3' => 'audio/mpeg',   'aif' => 'audio/x-aiff',   'aiff' => 'audio/x-aiff',   'aifc' => 'audio/x-aiff',   'm3u' => 'audio/x-mpegurl',   'ram' => 'audio/x-pn-realaudio',   'rm' => 'audio/x-pn-realaudio',   'rpm' => 'audio/x-pn-realaudio-plugin',   'ra' => 'audio/x-realaudio',   'wav' => 'audio/x-wav',   'pdb' => 'chemical/x-pdb',   'xyz' => 'chemical/x-xyz',   'bmp' => 'image/bmp',   'gif' => 'image/gif',   'ief' => 'image/ief',   'jpeg' => 'image/jpeg',   'jpg' => 'image/jpeg',   'jpe' => 'image/jpeg',   'png' => 'image/png',   'tiff' => 'image/tiff',   'tif' => 'image/tif',   'djvu' => 'image/vnd.djvu',   'djv' => 'image/vnd.djvu',   'wbmp' => 'image/vnd.wap.wbmp',   'ras' => 'image/x-cmu-raster',   'pnm' => 'image/x-portable-anymap',   'pbm' => 'image/x-portable-bitmap',   'pgm' => 'image/x-portable-graymap',   'ppm' => 'image/x-portable-pixmap',   'rgb' => 'image/x-rgb',   'xbm' => 'image/x-xbitmap',   'xpm' => 'image/x-xpixmap',   'xwd' => 'image/x-windowdump',   'igs' => 'model/iges',   'iges' => 'model/iges',   'msh' => 'model/mesh',   'mesh' => 'model/mesh',   'silo' => 'model/mesh',   'wrl' => 'model/vrml',   'vrml' => 'model/vrml',   'css' => 'text/css',   'html' => 'text/html',   'htm' => 'text/html',   'asc' => 'text/plain',   'txt' => 'text/plain',   'rtx' => 'text/richtext',   'rtf' => 'text/rtf',   'sgml' => 'text/sgml',   'sgm' => 'text/sgml',   'tsv' => 'text/tab-seperated-values',   'wml' => 'text/vnd.wap.wml',   'wmls' => 'text/vnd.wap.wmlscript',   'etx' => 'text/x-setext',   'xml' => 'text/xml',   'xsl' => 'text/xml',   'mpeg' => 'video/mpeg',   'mpg' => 'video/mpeg',   'mpe' => 'video/mpeg',   'qt' => 'video/quicktime',   'mov' => 'video/quicktime',   'mxu' => 'video/vnd.mpegurl',   'avi' => 'video/x-msvideo',   'movie' => 'video/x-sgi-movie',   'ice' => 'x-conference-xcooltalk');      if (isset($R05DD77CFE897ACD84A7ED6B7A7CC00ED[$R8FF3F4EA05D059F3E3E020099925ADB0]))    $R10FB484DCFC0F1C7E71436BBD7A890C1 = $R05DD77CFE897ACD84A7ED6B7A7CC00ED[$R8FF3F4EA05D059F3E3E020099925ADB0];   else    $R10FB484DCFC0F1C7E71436BBD7A890C1 = 'application/octet-stream';  }    header('Content-Transfer-Encoding: binary');  if ($R10FB484DCFC0F1C7E71436BBD7A890C1)   header('Content-Type: '.$R10FB484DCFC0F1C7E71436BBD7A890C1);  header('Content-Length: '.filesize($R09A33463761E506248078D422B1C5226));  header('Content-Disposition: attachment; filename="'.$R3656889A448A7AF799D2D7955BED2354.'"');  readfile($R09A33463761E506248078D422B1C5226);    exit;      